(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["market-page-index"],{"0671":function(t,e,i){"use strict";i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var o=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"u-line",style:[this.lineStyle]})},n=[]},"097e":function(t,e,i){"use strict";var o=i("a24f"),n=i.n(o);n.a},"0fda":function(t,e,i){"use strict";i("7a82");var o=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.toRefund=e.toCreateOrder=e.toCloseOrder=e.shopCollect=e.shopActive=e.orderPay=e.getshopWeekday=e.getshopService=e.getorderPayLlist=e.getShopList=e.getShopDetail=e.getServiceTime=e.getServiceDetail=e.getOrderList=e.getOrderDetail=e.getOrderCode=e.getCityList=void 0;var n=o(i("1601")),a={getshop_list:"/zshop/shopList",shop_detail:"zshop/shopDetail",getshop_service:"zshop/shopService",getservice_detail:"zshop/shopServiceDetail",getshop_weekday:"zshop/shopDay",getService_time:"zshop/shopTime",tocreate_order:"zshop/shopCreateOrder",getorder_pay_list:"/zshop/order_pay_detail",order_pay_url:"zshop/order_pay",getcity_list_url:"zshop/cityList",getorderList_url:"zshop/order_list",getorder_detail:"zshop/order_detail",getOrder_code:"zshop/order_qrcode",torefund_url:"zshop/order_Refund",order_close:"zshop/order_close",shop_collect:"zshop/shop_collect",getshop_active:"zshop/shopActive"};e.shopActive=function(t){return n.default.post(a.getshop_active,t)};e.shopCollect=function(t){return n.default.post(a.shop_collect,t)};e.toCloseOrder=function(t){return n.default.post(a.order_close,t)};e.toRefund=function(t){return n.default.post(a.torefund_url,t)};e.getOrderCode=function(t){return n.default.get(a.getOrder_code,t)};e.getOrderDetail=function(t){return n.default.get(a.getorder_detail,t)};e.getOrderList=function(t){return n.default.get(a.getorderList_url,t)};e.getCityList=function(t){return n.default.post(a.getcity_list_url,t)};e.orderPay=function(t){return n.default.post(a.order_pay_url,t)};e.getorderPayLlist=function(t){return n.default.get(a.getorder_pay_list,t)};e.toCreateOrder=function(t){return n.default.post(a.tocreate_order,t)};e.getServiceTime=function(t){return n.default.get(a.getService_time,t)};e.getshopWeekday=function(t){return n.default.get(a.getshop_weekday,t)};e.getServiceDetail=function(t){return n.default.get(a.getservice_detail,t)};e.getshopService=function(t){return n.default.get(a.getshop_service,t)};e.getShopDetail=function(t){return n.default.get(a.shop_detail,t)};e.getShopList=function(t){return n.default.get(a.getshop_list,t)}},"16ee":function(t,e,i){t.exports=i.p+"static/img/map.29b6ac88.png"},"1c8f":function(t,e,i){"use strict";i.r(e);var o=i("349b"),n=i.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},"2aff":function(t,e,i){"use strict";i("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o={name:"u-line",props:{color:{type:String,default:"#e4e7ed"},length:{type:String,default:"100%"},direction:{type:String,default:"row"},hairLine:{type:Boolean,default:!0},margin:{type:String,default:"0"},borderStyle:{type:String,default:"solid"}},computed:{lineStyle:function(){var t={};return t.margin=this.margin,"row"==this.direction?(t.borderBottomWidth="1px",t.borderBottomStyle=this.borderStyle,t.width=this.$u.addUnit(this.length),this.hairLine&&(t.transform="scaleY(0.5)")):(t.borderLeftWidth="1px",t.borderLeftStyle=this.borderStyle,t.height=this.$u.addUnit(this.length),this.hairLine&&(t.transform="scaleX(0.5)")),t.borderColor=this.color,t}}};e.default=o},"349b":function(t,e,i){"use strict";i("7a82");var o=i("dbce").default,n=i("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("2909")),s=n(i("b85c"));i("d3b7"),i("99af"),i("acd8");var r=o(i("0fda")),l=n(i("8d3b")),c=n(i("5aaf")),u={components:{},data:function(){return{queryparam:{shop_name:"",lng:"",lat:"",page:1,city_id:""},shopList:[{id:1,name:"店名",is_buy:0,is_new:1,logo_image:"../static/image1.jpg",address:"临桂县蛋糕店转让（低价急转",juli:23},{id:2,name:"店名222",is_buy:1,is_new:0,logo_image:"../static/image2.jpeg",address:"波波s蛋糕店(白塔店)",juli:1},{id:3,name:"店名3333",is_buy:1,is_new:0,logo_image:"../static/image2.jpeg",address:"波波s蛋糕店(白塔店)",juli:10},{id:4,name:"店名4444",is_buy:0,is_new:1,logo_image:"../static/image1.jpg",address:"临桂县蛋糕店转让（低价急转",juli:23}],city:"贵阳",bgimage:""}},onLoad:function(){this.getLocation()},onShow:function(){var t=l.default.getters.commondata.bgimage?l.default.getters.commondata:c.default.get("CommonData");t&&t.bgimage&&(this.bgimage=t.bgimage)},onUnload:function(){},methods:{getlistByCity:function(t){this.queryparam.city_id=t,this.queryparam.page=1,this.shopList=new Array,this.getshopList()},chooseCity:function(t){uni.navigateTo({url:"./city?position="+t})},getDetail:function(t,e){uni.navigateTo({url:"./shop_detail?id="+t+"&juli="+e})},toSearch:function(t){var e=this.queryparam;e.shop_name=t,e.page=1,this.queryparam=e,this.shopList=new Array,""==this.lng||""==this.lat?this.getMyLocation():this.getshopList()},toSearch1:function(){var t=this.queryparam;t.page=1,this.queryparam=t,this.shopList=new Array,""==this.lng||""==this.lat?this.getMyLocation():this.getshopList()},getLocation:function(){var t=this;uni.getSystemInfo({success:function(e){console.log("判断手机定位服务是否授权:",e);var i=e.locationEnabled,o=e.locationAuthorized;0==i||0==o?(console.log("未开启"),uni.showToast({title:"请打开手机GPS",icon:"none"})):(console.log("已开启"),uni.authorize({scope:"scope.userLocation",success:function(e){console.log("授权？ok"),t.getMyLocation()},fail:function(e){console.log("授权？fail",e),e=e["errMsg"],uni.showModal({content:"需要授权位置信息",confirmText:"确认授权"}).then((function(e){console.log("这里？？",e),e[1]["confirm"]&&uni.openSetting({success:function(e){e.authSetting["scope.userLocation"]?t.getMyLocation():uni.showModal({title:"授权",content:"获取授权"+authouName+"失败,是否前往授权设置？",success:function(t){t.confirm&&uni.openSetting()},fail:function(){uni.showToast({title:"系统错误！",icon:"none"})}})}}),e[1]["cancel"]&&uni.showToast({title:"你拒绝了授权，无法获得周边信息",icon:"none"})}))}}))}})},getMyLocation:function(){var t=this;console.log("huo"),uni.getLocation({type:"gcj02",success:function(e){t.shopList=new Array;var i=t.queryparam;i.lng=e.longitude,i.lat=e.latitude,i.page=1,t.queryparam=i,t.getshopList()},fail:function(t){console.log("获取失败",t),"getLocation:fail auth deny"===t.errMsg&&uni.showToast({title:"无法定位，请重新获取位置信息",icon:"none"}),"getLocation:fail:ERROR_NOCELL&WIFI_LOCATIONSWITCHOFF"===t.errMsg&&uni.showModal({content:"请开启手机定位服务",showCancel:!1})}})},getshopList:function(t){var e=this,i=this.queryparam;r.getShopList(i).then((function(t){console.log("门店列表",t,i);var o=e.shopList;e.city=t.data.city;var n,r=t.data.list.data,l=(0,s.default)(r);try{for(l.s();!(n=l.n()).done;){var c=n.value;c.juli=parseFloat(c.juli).toFixed(2)}}catch(u){l.e(u)}finally{l.f()}r.length>0&&(o=[].concat((0,a.default)(o),(0,a.default)(r))),e.shopList=o})).catch((function(t){})).finally((function(){t&&t()}))}},onReachBottom:function(){var t=this.queryparam;t.page=t.page+1,this.queryparam=t},onPullDownRefresh:function(){var t=this.queryparam;t.page=1,this.queryparam=t,this.shopList=new Array,""==this.lng||""==this.lat?(this.getMyLocation(),setTimeout((function(){uni.stopPullDownRefresh()}),1e3)):this.getshopList((function(){uni.stopPullDownRefresh()}))}};e.default=u},"39e6":function(t,e,i){"use strict";i.r(e);var o=i("2aff"),n=i.n(o);for(var a in o)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return o[t]}))}(a);e["default"]=n.a},"508c":function(t,e,i){"use strict";i.r(e);var o=i("6865"),n=i("1c8f");for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("097e");var s=i("f0c5"),r=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"51988bf0",null,!1,o["a"],void 0);e["default"]=r.exports},6865:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return o}));var o={uIcon:i("0648").default,uSearch:i("0785").default,uButton:i("a805").default,uLine:i("f35a").default},n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",{staticClass:"container"},[o("v-uni-image",{staticStyle:{width:"100vw",height:"100vh",position:"fixed",top:"0",bottom:"0",left:"0","z-index":"-10"},attrs:{src:t.bgimage,mode:"widthFix"}}),o("v-uni-view",{staticClass:"w-m locaton",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chooseCity(t.city)}}},[o("v-uni-image",{staticStyle:{width:"70rpx",height:"70rpx"},attrs:{src:i("16ee")}}),o("v-uni-text",{staticStyle:{margin:"0 15rpx","font-size":"34rpx","font-weight":"bold"}},[t._v(t._s(t.city))]),o("u-icon",{attrs:{name:"arrow-right",size:"30"}})],1),o("v-uni-view",{staticClass:"w-m search-box"},[o("v-uni-view",{staticStyle:{width:"85%"}},[o("u-search",{attrs:{"bg-color":"#fff","show-action":!1,placeholder:"搜索门店",animation:!1},on:{search:function(e){arguments[0]=e=t.$handleEvent(e),t.toSearch.apply(void 0,arguments)}},model:{value:t.queryparam.shop_name,callback:function(e){t.$set(t.queryparam,"shop_name",e)},expression:"queryparam.shop_name"}})],1),o("u-button",{attrs:{shape:"circle",size:"mini",plain:!0}},[t._v("搜索")])],1),o("v-uni-view",{staticClass:"w-m list-box"},t._l(t.shopList,(function(e){return o("v-uni-view",{key:e.shop_id,staticClass:"list-item",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getDetail(e.shop_id,e.juli)}}},[o("v-uni-view",{staticClass:"top-title"},[o("v-uni-view",{staticClass:"shop_name"},[t._v("店名")]),o("v-uni-view",{staticClass:"btn"},[t._v("进店")])],1),1==e.is_buy?o("v-uni-text",{staticClass:"recently"},[t._v("最近消费过")]):t._e(),o("v-uni-view",{staticStyle:{position:"relative"}},[1==e.is_new?o("v-uni-image",{staticClass:"new-icon",attrs:{src:i("7f24"),mode:"aspectFit"}}):t._e(),o("v-uni-view",{staticClass:"goods-image"},[e.logo_image?o("v-uni-image",{staticClass:"image",attrs:{src:e.logo_image,mode:"aspectFill"}}):o("v-uni-view",{staticClass:"image",staticStyle:{"background-color":"antiquewhite"}})],1)],1),o("u-line",{attrs:{color:"#ddd"}}),o("v-uni-view",{staticClass:"address-box"},[o("v-uni-view",{staticClass:"address"},[t._v(t._s(e.address))]),o("v-uni-view",{staticClass:"juli"},[t._v(t._s(e.juli)+"km")])],1)],1)})),1)],1)},a=[]},"7f24":function(t,e,i){t.exports=i.p+"static/img/new.762a1004.png"},"849e":function(t,e,i){"use strict";var o=i("a18e"),n=i.n(o);n.a},"97c4":function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 引入uView全局scss变量文件 */.w-m[data-v-51988bf0]{width:94%;margin:%?20?% auto}.locaton[data-v-51988bf0]{display:flex;align-items:center}.search-box[data-v-51988bf0]{display:flex;align-items:center;justify-content:space-between}.list-box[data-v-51988bf0]{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;box-sizing:border-box}.list-box .list-item[data-v-51988bf0]{box-sizing:border-box;position:relative;width:48%;background-color:#fff;border-radius:%?15?%;padding:%?20?%;margin:%?20?% 0}.list-box .list-item .top-title[data-v-51988bf0]{display:flex;align-items:center;justify-content:space-between}.list-box .list-item .top-title .shop_name[data-v-51988bf0]{position:relative;width:70%;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.list-box .list-item .top-title .btn[data-v-51988bf0]{text-align:center;padding:%?5?% %?20?%;background-color:#bddce6;color:#536889;font-size:%?24?%;border-radius:%?50?%}.list-box .list-item .new-icon[data-v-51988bf0]{position:absolute;top:%?-20?%;right:%?-10?%;height:%?60?%;width:%?60?%;z-index:9999}.list-box .list-item .goods-image[data-v-51988bf0]{position:relative;width:100%;height:0;padding-bottom:100%;overflow:hidden;background:#fff;margin:%?25?% 0}.list-box .list-item .goods-image[data-v-51988bf0]:after{content:"";display:block;margin-top:100%}.list-box .list-item .goods-image .image[data-v-51988bf0]{position:absolute;width:100%;height:100%;top:0;left:0;-o-object-fit:cover;object-fit:cover;transition:-webkit-transform .3s ease;transition:transform .3s ease;transition:transform .3s ease,-webkit-transform .3s ease}.list-box .list-item .goods-image .image[data-v-51988bf0]:hover{-webkit-transform:scale(1.1);transform:scale(1.1)\n  /* 鼠标悬停时放大1.1倍 */}.list-box .list-item .address-box[data-v-51988bf0]{width:100%;margin:%?25?% 0;display:flex;align-items:center;justify-content:space-between}.list-box .list-item .address-box .address[data-v-51988bf0]{width:65%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.list-box .list-item .address-box .juli[data-v-51988bf0]{color:#999;width:35%}.list-box .list-item .recently[data-v-51988bf0]{background-color:#fff0e7;color:#ffa274;font-size:%?24?%;margin:%?15?% 0;padding:%?5?% %?10?%}.list-box .list-item[data-v-51988bf0]:hover{background-color:#eff3fa}',""]),t.exports=e},a18e:function(t,e,i){var o=i("c368");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("3ae36166",o,!0,{sourceMap:!1,shadowMode:!1})},a24f:function(t,e,i){var o=i("97c4");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var n=i("4f06").default;n("7dde05d6",o,!0,{sourceMap:!1,shadowMode:!1})},c368:function(t,e,i){var o=i("24fb");e=o(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 引入uView全局scss变量文件 */.u-line[data-v-21fb694c]{vertical-align:middle}',""]),t.exports=e},f35a:function(t,e,i){"use strict";i.r(e);var o=i("0671"),n=i("39e6");for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);i("849e");var s=i("f0c5"),r=Object(s["a"])(n["default"],o["b"],o["c"],!1,null,"21fb694c",null,!1,o["a"],void 0);e["default"]=r.exports}}]);