(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["shortvideo-detail"],{"4ce5":function(t,i,e){"use strict";var a=e("eac5e"),n=e.n(a);n.a},"5bdf":function(t,i,e){"use strict";e.r(i);var a=e("fc19"),n=e.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return a[t]}))}(o);i["default"]=n.a},6606:function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */\n/* 引入uView全局scss变量文件 */uni-page-body[data-v-c5b9263e]{background:#000}body.?%PAGE?%[data-v-c5b9263e]{background:#000}.page[data-v-c5b9263e]{position:absolute;width:%?750?%;top:0;left:0\n  /* width: 750rpx; */}.weiBtn[data-v-c5b9263e]{display:flex;justify-content:center;align-items:center;padding:%?20?% %?30?%;width:%?150?%;color:#fff;margin-left:%?20?%;border-radius:%?10?%;background-color:var(--themeColor)}.zhiBtn[data-v-c5b9263e]{display:flex;justify-content:center;align-items:center;padding:%?20?% %?30?%;width:%?150?%;color:#999;margin-left:%?20?%;border-radius:%?10?%;background-color:#e6e6e6}.replies-img[data-v-c5b9263e]{width:%?60?%;height:%?60?%;border-radius:50%}uni-page-body[data-v-c5b9263e]{width:100%;height:100%;background-color:#000}body.?%PAGE?%[data-v-c5b9263e]{background-color:#000}.ppppppppppppppp[data-v-c5b9263e]{width:100%;position:absolute;bottom:%?98?%;height:%?800?%;border-radius:%?20?% %?20?% 0 0;background:#fff}.ppppppppppppppp .top-commit[data-v-c5b9263e]{padding:%?30?% %?30?% 0 %?30?%;font-weight:800;font-size:%?32?%}.scroll-Y[data-v-c5b9263e]{height:%?760?%}.play-right[data-v-c5b9263e]{border-radius:50%;opacity:.6;display:flex;justify-content:center;align-items:center;position:absolute}.uni-margin-wrap[data-v-c5b9263e]{width:100%;height:100%}uni-video[data-v-c5b9263e]{width:100%;height:100%}.swiper-item[data-v-c5b9263e]{display:block;text-align:center}.bom[data-v-c5b9263e]{position:fixed;bottom:0;left:0;z-index:999;padding:5px 10px;width:100%;background:#fff}.bom .ipt[data-v-c5b9263e]{border-radius:30px;width:100%}.char-list[data-v-c5b9263e]{padding:0 10px}.char-list .pop-tit[data-v-c5b9263e]{font-weight:700;font-size:12px;color:#000;position:fixed;width:98%;background:#fff;height:30px;top:0;left:0;z-index:2}.char-list .chat[data-v-c5b9263e]{display:flex;margin-top:10px}.char-list .chat .bigavatar[data-v-c5b9263e]{width:%?80?%;height:%?80?%;border-radius:50%}.char-list .chat .more-tit[data-v-c5b9263e]{color:#999;margin:%?10?%;font-size:12px}.char-list .chat .name[data-v-c5b9263e]{font-size:12px;color:#bbb}.char-list .chat .comment[data-v-c5b9263e]{margin:0 5px;font-size:12px;color:#999}.char-list .chat .recommit[data-v-c5b9263e]{margin:%?10?%}.char-list .chat .time[data-v-c5b9263e]{font-size:12px;color:#ccc}.char-list .chat .reply[data-v-c5b9263e]{font-size:12px;margin-left:%?20?%;color:#59aaff}.logo[data-v-c5b9263e]{position:absolute;z-index:4;top:%?260?%;right:%?18?%;width:%?90?%;height:%?90?%;z-index:4;border-radius:50%;overflow:hidden;border:%?4?% solid #fff;background:linear-gradient(180deg,#ff2775,#ff2f4b)}.logo-img[data-v-c5b9263e]{width:%?86?%;height:%?86?%;border-radius:50%}.viewnum[data-v-c5b9263e]{position:absolute;z-index:4;top:%?400?%;right:%?26?%;display:flex;flex-direction:column;align-items:center}.viewnum-img[data-v-c5b9263e]{width:%?72?%;height:%?72?%}.viewnum-txt[data-v-c5b9263e]{font-size:%?24?%;color:#fff;text-shadow:0 6px 12px rgba(0,0,0,.12)}.likenum[data-v-c5b9263e]{position:absolute;z-index:4;top:%?530?%;right:%?26?%;display:flex;flex-direction:column;align-items:center}.commentnum[data-v-c5b9263e]{position:absolute;z-index:4;top:%?660?%;right:%?26?%;display:flex;flex-direction:column;align-items:center}.commentnum-img[data-v-c5b9263e]{width:%?72?%;height:%?72?%}.commentnum-txt[data-v-c5b9263e]{font-size:%?24?%;color:#fff;text-shadow:0 6px 12px rgba(0,0,0,.12)}.likenum-img[data-v-c5b9263e]{width:%?72?%;height:%?72?%}.likenum-txt[data-v-c5b9263e]{font-size:%?24?%;color:#fff;text-shadow:0 6px 12px rgba(0,0,0,.12)}.history_img[data-v-c5b9263e]{width:%?72?%;height:%?72?%}.video-right[data-v-c5b9263e]{position:absolute;height:100px;height:400px;z-index:999;top:50%;right:10px;color:#fff;margin-right:5px;text-align:center}.video-right uni-image[data-v-c5b9263e]{width:%?90?%;height:%?90?%;border-radius:50%;border:%?2?% solid #bbb;margin-bottom:%?30?%}.video-right .circle[data-v-c5b9263e]{width:20px;height:20px;border-radius:50%;background:red;text-align:center;line-height:20px;position:absolute;top:35px;left:25%}.video-right .mt[data-v-c5b9263e]{margin-top:8px}.video-bottom[data-v-c5b9263e]{position:absolute;bottom:100px;font-weight:700;color:#fff;left:10px}.video-bottom .details[data-v-c5b9263e]{font-weight:400;margin:%?10?%;display:flex}',""]),t.exports=i},"9fd4":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return a}));var a={uIcon:e("0648").default,uLoadmore:e("bb65").default,uInput:e("246c").default},n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page",staticStyle:{height:"100vh"}},[e("v-uni-swiper",{staticClass:"swiper",staticStyle:{height:"100vh"},attrs:{vertical:!0,circular:!0,duration:500,circular:!1,current:t.current},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.change.apply(void 0,arguments)}}},t._l(t.list,(function(i,a){return e("v-uni-swiper-item",{key:a},[e("v-uni-video",{staticStyle:{height:"100vh"},attrs:{id:"myVideo"+a,muted:!1,loop:!0,"show-fullscreen-btn":!1,"object-fit":"contain",src:i.video_url,"show-play-btn":!1,"show-center-play-btn":!0},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.handlePlay(a)},play:function(i){arguments[0]=i=t.$handleEvent(i),t.onplay(a)}}}),e("v-uni-view",{staticClass:"logo",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goUserInfo(i.user.user_id)}}},[e("v-uni-image",{staticClass:"logo-img",attrs:{src:i.user.avatar_img}})],1),e("v-uni-view",{staticClass:"viewnum"},[e("v-uni-image",{staticClass:"viewnum-img",attrs:{src:"/static/img/shortvideo_view.png"}}),e("v-uni-text",{staticClass:"viewnum-txt"},[t._v(t._s(i.view_count))])],1),e("v-uni-view",{staticClass:"likenum",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.dozan(a)}}},[e("v-uni-image",{staticClass:"likenum-img",attrs:{src:i.is_like?"/static/img/shortvideo_like2.png":"/static/img/shortvideo_like.png"}}),e("v-uni-text",{staticClass:"likenum-txt"},[t._v(t._s(i.like_count))])],1),e("v-uni-view",{staticClass:"video-bottom"},[e("v-uni-view",{staticClass:"name"},[t._v("@"+t._s(i.user.nick_name))]),e("v-uni-view",{staticClass:"details"},[t._v(t._s(i.remark)),t._l(i.tag,(function(a){return i.tag.length>0?e("v-uni-text",{key:a,staticStyle:{color:"#f1f100"}},[t._v("#"+t._s(a))]):t._e()}))],2)],1)],1)})),1),t.show?e("v-uni-view",{staticClass:"ppppppppppppppp"},[e("v-uni-view",{staticClass:"d-between top-commit"},[e("v-uni-view",{}),e("v-uni-view",{},[t._v("全部评论")]),e("v-uni-view",{},[e("u-icon",{attrs:{name:"close",size:"40"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.show=!1}}})],1)],1),e("v-uni-scroll-view",{staticClass:"scroll-Y",attrs:{"scroll-y":"true"},on:{scrolltolower:function(i){arguments[0]=i=t.$handleEvent(i),t.scrolltolower.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"char-list"},[t._l(t.charts,(function(i,a){return e("v-uni-view",{key:a,staticClass:"chat",attrs:{class:"chat"}},[e("v-uni-view",{staticClass:"d-flex"},[e("v-uni-view",{},[e("v-uni-image",{staticClass:"bigavatar",attrs:{src:i.avatar,mode:""}})],1),e("v-uni-view",{staticStyle:{width:"100%"}},[e("v-uni-view",[e("v-uni-view",{staticClass:"comment"},[t._v(t._s(i.userName))]),e("v-uni-view",{staticClass:"recommit"},[t._v(t._s(i.content))]),e("v-uni-view",{staticClass:"d-flex"},[e("v-uni-view",{staticClass:"time"},[t._v(t._s(i.time))]),e("v-uni-view",{staticClass:"reply",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.inputFocus(i,a)}}},[t._v("回复")])],1)],1),0!==i.replies.length?e("v-uni-view",{staticClass:"collapse "},[t._l(i.replies,(function(i,a){return e("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:t.bomContent,expression:"bomContent"}],key:a,staticClass:"d-flex",staticStyle:{"margin-top":"10px"}},[e("v-uni-image",{staticClass:"replies-img",attrs:{src:i.avatar,mode:""}}),e("v-uni-view",{staticStyle:{width:"250px","margin-left":"10px"}},[e("v-uni-view",{staticClass:"comment"},[t._v(t._s(i.userName))]),e("v-uni-view",{staticClass:"recommit",staticStyle:{color:"#000"}},[t._v(t._s(i.content))]),e("v-uni-view",{staticClass:"d-flex"},[e("v-uni-view",{staticClass:"time"},[t._v(t._s(i.time))])],1)],1)],1)})),e("v-uni-view",{staticClass:"more-tit",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.CommentShow()}}},[t._v("一一 点击查看"+t._s(i.replies.length)+"条评论")])],2):t._e()],1)],1)],1)})),e("v-uni-view",{staticStyle:{height:"100rpx"}}),e("u-loadmore",{attrs:{status:t.status}}),t.goodKey?e("v-uni-view",{staticClass:"a-center bom"},[e("u-input",{staticClass:"ipt",attrs:{clearable:!1,cursorSpacing:"30",border:!0,placeholder:"请输入您的评论内容"},model:{value:t.value,callback:function(i){t.value=i},expression:"value"}}),t.value?e("v-uni-view",{staticClass:"weiBtn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.send()}}},[t._v("发送")]):e("v-uni-view",{staticClass:"zhiBtn"},[t._v("发送")])],1):t._e(),t.keyword?e("v-uni-view",{staticClass:"a-center bom"},[e("u-input",{staticClass:"ipt",attrs:{clearable:!1,focus:t.keyword,cursorSpacing:"30",border:!0,placeholder:"请输入您的回复内容"},model:{value:t.value,callback:function(i){t.value=i},expression:"value"}}),t.value?e("v-uni-view",{staticClass:"weiBtn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.send()}}},[t._v("发送")]):e("v-uni-view",{staticClass:"zhiBtn"},[t._v("发送")])],1):t._e()],2)],1)],1):t._e()],1)},o=[]},ca9d:function(t,i,e){"use strict";e.r(i);var a=e("9fd4"),n=e("5bdf");for(var o in n)["default"].indexOf(o)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(o);e("4ce5");var s=e("f0c5"),c=Object(s["a"])(n["default"],a["b"],a["c"],!1,null,"c5b9263e",null,!1,a["a"],void 0);i["default"]=c.exports},eac5e:function(t,i,e){var a=e("6606");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("3e5bd49c",a,!0,{sourceMap:!1,shadowMode:!1})},fc19:function(t,i,e){"use strict";e("7a82");var a=e("dbce").default,n=e("4ea4").default;Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("2909"));e("d3b7"),e("159b"),e("14d9");var s=a(e("819f")),c={components:{},data:function(){return{value:"",params:{pageNum:1,pageSize:20},chart:{dynamicId:"",pageNum:1,pageSize:10},list:[],charts:[],show:!1,status:"正在加载",playShow:!1,commentId:"",userId:"",keyword:!1,goodKey:!1,bomContent:!1,pageHeight:"",showshop:!1,showproduct:!1,opt:{},current:0}},mounted:function(){this.showVideo()},onLoad:function(t){this.opt=t;var i=uni.getSystemInfoSync();this.pageHeight=i.windowHeight,uni.hideTabBar()},methods:{goUserInfo:function(t){uni.navigateTo({url:"/shortvideo/author?user_id="+t})},viewHistory:function(){uni.navigateTo({url:"/shortvideo/history"})},toGoodsDetail:function(t){uni.navigateTo({url:"/shoppingpage/goods/detail?goodsId="+t,fail:function(t){console.log(t)}})},toShopDetail:function(t){uni.navigateTo({url:"/market/page/shop_detail?id="+t})},showShop:function(){this.showshop=!0},showGoods:function(){this.showproduct=!0},dozan:function(t){var i=this;s.tabLikes({video_id:i.list[t].video_id}).then((function(e){i.list[t].is_like=e.data.is_like,i.getactualdata(t)})).catch((function(t){}))},getactualdata:function(t){var i=this;s.getActualData({video_id:i.list[t].video_id}).then((function(e){console.log("详情",e),i.list[t].is_like=e.data.detail.is_like,i.list[t].like_count=e.data.detail.like_count,i.list[t].view_count=e.data.detail.view_count,console.log("这儿而?",i.list[t])})).catch((function(t){}))},showVideo:function(){var t=this,i={log_id:this.opt.log_id},e=this;s.historyPlay(i).then((function(a){t.list=a.data.video_list,t.list.forEach((function(t,a){if(console.log("循环",t),t.log_id==i.log_id){var n="myVideo"+a;e.current=a,console.log("播放",e.current),uni.createVideoContext(n).play(),console.log(a)}}))}))},handlePlay:function(t){var i="myVideo"+t;this.videoContext=uni.createVideoContext(i),this.playShow?(this.videoContext.play(),this.playShow=!1):(this.videoContext.pause(),this.playShow=!0)},onplay:function(t){var i=this;t>=this.list.length-1&&s.addplayList({log_id:this.list[t].log_id}).then((function(t){var e;(e=i.list).push.apply(e,(0,o.default)(t.data.video_list))}))},change:function(t){var i="myVideo"+t.detail.current;console.log("使用之前的"),this.videoContext=uni.createVideoContext(i),this.videoContext.play(),this.list.forEach((function(t,e){var a="myVideo"+e;a!==i&&uni.createVideoContext(a).pause()})),this.chart.pageNum=1,this.playShow=!1,this.keyword=!1},CommentShow:function(){this.bomContent=!this.bomContent},scrolltolower:function(){var t=this;this.chart.pageNum++,this.$api.commentListDy(this.chart).then((function(i){var e;t.chart.pageNum<=i.data.pages?(e=t.charts).push.apply(e,(0,o.default)(i.data.records)):t.$until.error("没有更多了")}))},heart:function(t){var i={topicType:5,topicId:t.dynamicId};this.$api.like(i).then((function(i){200==i.code&&(t.likeType=!0,t.likeNum++)}))},GoDetails:function(t){uni.navigateTo({url:"ChefCircle-details?userId="+t.userId})},send:function(){var t=this;if(this.commentId){var i={type:1,topicType:5,content:this.value,topicId:this.commentId,toUserId:this.userId};this.$api.comment(i).then((function(i){200==i.code&&(t.$api.commentListDy(t.chart).then((function(i){t.charts=i.data.records})),t.value="",t.commentId="",t.keyword=!1,t.goodKey=!0)}))}else{var e={type:0,topicType:5,content:this.value,topicId:this.chart.dynamicId};this.$api.comment(e).then((function(i){200==i.code&&(t.$api.commentListDy(t.chart).then((function(i){t.charts=i.data.records})),t.value="",t.goodKey=!0)}))}},inputFocus:function(t,i){this.userId=t.userId,this.commentId=t.commentId,this.keyword=!0},chat:function(t){var i=this;this.chart.dynamicId=t.dynamicId,this.chart.pageNum=1,this.$api.commentListDy(this.chart).then((function(t){200==t.code&&(i.charts=t.data.records,i.show=!0,i.keyword=!1,i.goodKey=!0)}))}}};i.default=c}}]);